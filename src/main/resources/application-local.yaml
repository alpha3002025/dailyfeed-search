spring:
  application:
    name: dailyfeed-search
  data:
    mongodb:
      protocol: mongodb # mongodb+srv or mongodb (atlas 에서만 mongodb+srv)
      uri: ${MONGODB_CONNECTION_URI:mongodb://localhost:27017/dailyfeed?directConnection=true}
app:
  dailyfeed-search:
    mongodb:
      database: dailyfeed
server:
  port: ${SERVER_PORT:8083}

dailyfeed:
  services:
    member:
      feign:
        url: ${MEMBER_SERVICE_URL:http://localhost:8084}
        timeout:
          connect: 5000
          read: 10000
    timeline:
      feign:
        url: ${TIMELINE_SERVICE_URL:http://localhost:8082}
        timeout:
          connect: 5000
          read: 10000
      push-pull:
        limit: 1000
    content:
      feign:
        url: ${CONTENT_SERVICE_URL:http://localhost:8081}
        timeout:
          connect: 5000
          read: 10000
      comment:
        max-depth: 2    # 댓글 최대 깊이
        page-size: 20   # 기본 페이지 크기
    search:
      feign:
        url: ${SEARCH_SERVICE_URL:http://localhost:8083}
        timeout:
          connect: 5000
          read: 10000
    image:
      feign:
        url: ${IMAGE_SERVICE_URL:http://localhost:8085}
        timeout:
          connect: 5000
          read: 10000
    activity:
      feign:
        url: ${ACTIVITY_SERVICE_URL:http://localhost:8086}
        timeout:
          connect: 5000
          read: 10000

# Actuator & Prometheus Metrics
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
      base-path: /actuator
  endpoint:
    health:
      show-details: always
    prometheus:
      enabled: true
  metrics:
    export:
      prometheus:
        enabled: true
    tags:
      application: ${spring.application.name}
      environment: local